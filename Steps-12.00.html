
Configure Staging ETL Data Flow Task
12
<p><br></p><p><span style="color: rgb(118, 118, 118); font-family: Lato, Helvetica, Arial, sans-serif;"></span>Step 1 :<font face="Lato, Helvetica, Arial, sans-serif" style="font-weight: 700;"><span style="font-weight: 400; font-size: 16px !important;"><font color="#767676">&nbsp;Double Click the Data Flow Task named:&nbsp;</font><font color="#00ff00">DFT-</font></span></font><font style="font-weight: 700;" color="#00ff00"><font face="Lato, Helvetica, Arial, sans-serif"><span style="font-size: 16px;">Load_Collision_Stg</span></font><font face="Lato, Helvetica, Arial, sans-serif"><span style="font-weight: 400; font-size: 16px !important;">.</span></font></font><label ng-bind-html="trust(i.DetailedInstructions)" class="ng-binding" style=""></label></p><p style=""><font face="Lato, Helvetica, Arial, sans-serif"><span style="color: rgb(118, 118, 118); font-weight: 400; font-size: 16px !important;">A. Drag and drop a Script Component and name it:&nbsp;</span><span style="font-size: 16px;"><font color="#00ff00" style=""><b>SC-Read Json_Collision</b></font></span><span style="color: rgb(118, 118, 118); font-weight: 400; font-size: 16px !important;">. Specify the use as Source.</span></font><br></p><p style=""><font color="#767676" face="Lato, Helvetica, Arial, sans-serif"><span style="font-size: 16px !important; font-weight: 400;">B. Drag and drop a conditional Split transformation : </span></font><font face="Lato, Helvetica, Arial, sans-serif" color="#00ff00"><span style="font-size: 16px;"><b>Remove Null_X_Y_Coordinate</b></span></font><font color="#767676" face="Lato, Helvetica, Arial, sans-serif"><span style="font-size: 16px !important; font-weight: 400;">.</span></font></p><p style="font-family: Lato, Helvetica, Arial, sans-serif !important; font-size: 16px !important;"><span style="color: rgb(118, 118, 118); font-weight: 400;">C. Drag and drop an Union All transformation to capture the Bad Data ( All collisions record with no X&amp;Y coordinate)</span></p><p style=""><font color="#767676" face="Lato, Helvetica, Arial, sans-serif"><span style="font-size: 16px !important; font-weight: 400;">D. Drag and drop an OLEDB Destination and name it</span><span style="font-size: 16px !important;"><b> </b></span></font><font face="Lato, Helvetica, Arial, sans-serif" color="#00ff00"><span style="font-size: 16px;"><b>Desination-Collisions_Stg</b></span></font><font color="#767676" face="Lato, Helvetica, Arial, sans-serif"><span style="font-size: 16px !important; font-weight: 400;">.</span></font></p><p style=""><img src="https://app.colaberry.com/uploads/ProjectStepsImages/1293/6/1.jpg" style="width: 50%;"></p><p style=""><font color="#767676" face="Lato, Helvetica, Arial, sans-serif"><span style="font-size: 16px !important; font-weight: 400;">Step 2 :&nbsp;</span></font><span style="color: rgb(118, 118, 118); font-family: Lato, Helvetica, Arial, sans-serif; font-size: 16px;">Configure the Script Component.</span></p><p style="color: rgb(118, 118, 118); font-family: Lato, Helvetica, Arial, sans-serif; font-size: 16px;">&nbsp;Double Click on the Script Component name&nbsp;<b style="color: rgb(0, 255, 0);">SC-Read Json_Collision</b>.</p><p style="color: rgb(118, 118, 118); font-family: Lato, Helvetica, Arial, sans-serif; font-size: 16px;">A. Click the Inputs and Outputs Tab.</p><p style="color: rgb(118, 118, 118); font-family: Lato, Helvetica, Arial, sans-serif; font-size: 16px;">B. Add all Output Columns and set the Data Types and Lengths as string[DT_STR] and 255 respectively</p><p style="color: rgb(118, 118, 118); font-family: Lato, Helvetica, Arial, sans-serif; font-size: 16px;">C. Click Edit Script.</p><p style="color: rgb(118, 118, 118); font-family: Lato, Helvetica, Arial, sans-serif; font-size: 16px;"><img src="https://app.colaberry.com/uploads/ProjectStepsImages/1293/6/2.jpg" style="width: 50%;"></p><p style="color: rgb(118, 118, 118); font-family: Lato, Helvetica, Arial, sans-serif; font-size: 16px;"><br></p><p style="color: rgb(118, 118, 118); font-family: Lato, Helvetica, Arial, sans-serif; font-size: 16px;">Step 3: Add Code to main.cs</p><p style="color: rgb(118, 118, 118); font-family: Lato, Helvetica, Arial, sans-serif; font-size: 16px;">A. Delete all the code in main.cs.</p><p style=""><font color="#767676" face="Lato, Helvetica, Arial, sans-serif"><span style="font-size: 16px;">B. Copy and Paste the code from the </span></font><font face="Lato, Helvetica, Arial, sans-serif" color="#00ff00"><span style="font-size: 16px;"><b style="">Main Script task Load Collision_Stg</b></span></font><font color="#767676" face="Lato, Helvetica, Arial, sans-serif"><span style="font-size: 16px;">&nbsp;file,&nbsp; located&nbsp; in the Seattle_Collision_Staging folder, into main.cs.</span></font></p><p style="color: rgb(118, 118, 118); font-family: Lato, Helvetica, Arial, sans-serif; font-size: 16px;">It should look like the image below</p><p style="color: rgb(118, 118, 118); font-family: Lato, Helvetica, Arial, sans-serif; font-size: 16px;"><img src="https://app.colaberry.com/uploads/ProjectStepsImages/1293/6/5.jpg" style="width: 50%;"><br></p><p style="color: rgb(118, 118, 118); font-family: Lato, Helvetica, Arial, sans-serif; font-size: 16px;">Step 4: Add necessary Extensions.</p><p style="color: rgb(118, 118, 118); font-family: Lato, Helvetica, Arial, sans-serif; font-size: 16px;">With the main.cs still open.</p><p style="color: rgb(118, 118, 118); font-family: Lato, Helvetica, Arial, sans-serif; font-size: 16px;">A. Under the Solution Explorer right click on&nbsp;<b>Add References</b>.</p><p style="color: rgb(118, 118, 118); font-family: Lato, Helvetica, Arial, sans-serif; font-size: 16px;">B. Select&nbsp;<b>System.Web.Extensions</b>&nbsp;and click OK.</p><p style="color: rgb(118, 118, 118); font-family: Lato, Helvetica, Arial, sans-serif; font-size: 16px;"><img src="https://app.colaberry.com/uploads/ProjectStepsImages/1293/6/6.jpg" style="width: 50%;"></p><p style="color: rgb(118, 118, 118); font-family: Lato, Helvetica, Arial, sans-serif; font-size: 16px;"><br></p><p style="color: rgb(118, 118, 118); font-family: Lato, Helvetica, Arial, sans-serif; font-size: 16px;">Step 5: Add a Class.</p><p style="color: rgb(118, 118, 118); font-family: Lato, Helvetica, Arial, sans-serif; font-size: 16px;">With the Main Script still open</p><p style="color: rgb(118, 118, 118); font-family: Lato, Helvetica, Arial, sans-serif; font-size: 16px;">A. Under the solution explorer , right click on SC</p><p style="color: rgb(118, 118, 118); font-family: Lato, Helvetica, Arial, sans-serif; font-size: 16px;">B. Select&nbsp; Add Class, </p><p style="font-family: Lato, Helvetica, Arial, sans-serif; font-size: 16px;"><font color="#767676">C. Name your class&nbsp; &nbsp;</font><b style=""><font style="" color="#00ff00">Collisions</font></b><font color="#767676">&nbsp;and click&nbsp;</font><b style="color: rgb(118, 118, 118);">Add</b><font color="#767676">.</font></p><p style="color: rgb(118, 118, 118); font-family: Lato, Helvetica, Arial, sans-serif; font-size: 16px;"><img src="https://app.colaberry.com/uploads/ProjectStepsImages/1293/6/7.jpg" style="width: 50%;"><br></p><div><br></div><div><p style="color: rgb(118, 118, 118); font-family: Lato, Helvetica, Arial, sans-serif; font-size: 16px;">Step 6: Add Code Class Collisions</p><p style=""><span style="font-family: Lato, Helvetica, Arial, sans-serif; font-size: 16px; color: rgb(118, 118, 118);">A. Delete the default code in Class and then Copy and Paste the code, from the</span><font color="#00ff00" style="font-family: Lato, Helvetica, Arial, sans-serif; font-size: 16px;"><b>&nbsp;<font style="">Class Script-JSON</font></b></font><font color="#767676" style="font-family: Lato, Helvetica, Arial, sans-serif; font-size: 16px;">&nbsp;file in the Staging</font><br><font color="#767676" style="font-family: Lato, Helvetica, Arial, sans-serif; font-size: 16px;">&nbsp;&nbsp;&nbsp; Folder, into&nbsp;</font><font style=""><font color="#00ff00" face="Lato, Helvetica, Arial, sans-serif"><span style="font-size: 16px;"><b>Collisions</b></span></font><font color="#767676" face="Lato, Helvetica, Arial, sans-serif"><span style="font-size: 16px;">.</span></font></font></p><p style="color: rgb(118, 118, 118); font-family: Lato, Helvetica, Arial, sans-serif; font-size: 16px;">B. Press the Save All button.</p><p style="color: rgb(118, 118, 118); font-family: Lato, Helvetica, Arial, sans-serif; font-size: 16px;">C. Close the window.</p><p style="color: rgb(118, 118, 118); font-family: Lato, Helvetica, Arial, sans-serif; font-size: 16px;">D. Click the OK button in the Script Transformation Editor.</p><p style="color: rgb(118, 118, 118); font-family: Lato, Helvetica, Arial, sans-serif; font-size: 16px;"><img src="https://app.colaberry.com/uploads/ProjectStepsImages/1293/6/8.jpg" style="width: 50%;"></p><p style="color: rgb(118, 118, 118); font-family: Lato, Helvetica, Arial, sans-serif; font-size: 16px;"><br></p><p style="color: rgb(118, 118, 118); font-family: Lato, Helvetica, Arial, sans-serif; font-size: 16px;">Step 7 : Configure the conditional split&nbsp;</p><p style="font-family: Lato, Helvetica, Arial, sans-serif; font-size: 16px;"><span style="color: rgb(118, 118, 118);">Double click on the conditional split named </span><font color="#00ff00"><b>Remove Null_X_Y_Coordinate</b></font></p><p style="color: rgb(118, 118, 118); font-family: Lato, Helvetica, Arial, sans-serif; font-size: 16px;">A- Name the output that satisfy the condition both X&nbsp; and Y coordinate&nbsp; been null:&nbsp; Bad Data</p><p style="font-family: Lato, Helvetica, Arial, sans-serif; font-size: 16px;"><span style="color: rgb(118, 118, 118);">B-Copy&nbsp; and paste, the code in the file&nbsp;</span><font color="#00ff00"><b>Conditional split remove null values</b>&nbsp;</font><font color="#767676">from the folder Seattle_Collision_Staging&nbsp;&nbsp;</font></p><p style="font-family: Lato, Helvetica, Arial, sans-serif; font-size: 16px;"><font color="#767676">into the condition section</font></p><p style="font-family: Lato, Helvetica, Arial, sans-serif; font-size: 16px;"><font color="#767676">C- Name the default output Good Data and click ok</font></p><p style="font-family: Lato, Helvetica, Arial, sans-serif; font-size: 16px;"><font color="#767676">D-connect the default out (Good Data)to the OLEDB destination and,&nbsp; the Bad data to the union All .</font></p><p style="font-family: Lato, Helvetica, Arial, sans-serif; font-size: 16px;"><img src="https://app.colaberry.com/uploads/ProjectStepsImages/1293/6/9.jpg" style="width: 50%;"><font color="#767676"><br></font></p><p style="color: rgb(118, 118, 118); font-family: Lato, Helvetica, Arial, sans-serif; font-size: 16px;"><br></p><p style="font-family: Lato, Helvetica, Arial, sans-serif; font-size: 16px;"><font color="#767676">Step 8: Configure the OLE DB Destination named&nbsp;</font><font color="#00ff00"><b><font style="">Destination-Collisions_Staging</font>.</b></font><br></p><p style="color: rgb(118, 118, 118); font-family: Lato, Helvetica, Arial, sans-serif; font-size: 16px;">A. Double Click on an OLE DB Destination.<br></p><p style="font-family: Lato, Helvetica, Arial, sans-serif; font-size: 16px;"><span style="color: rgb(118, 118, 118);">B. Set the OLE DB connection manager to</span><font color="#00ff00"><b> Seattle_Collision_Staging</b></font><br></p><p style="font-family: Lato, Helvetica, Arial, sans-serif; font-size: 16px;"><font color="#767676">C. Select the Destination table to</font><b style=""><font color="#0000FF" style="background-color: transparent; color: rgb(118, 118, 118);">&nbsp;</font><font style="" color="#00ff00">[dbo].[Collision_Stg]</font></b><font color="#00ff00" style=""><b>.</b></font></p><p style=""><span style="background-color: transparent;"><font color="#767676" face="Lato, Helvetica, Arial, sans-serif"><span style="font-size: 16px;">D . On the mapping&nbsp;tab, set the&nbsp; column mapping&nbsp;as shown below.</span></font></span></p><p style=""><img src="https://app.colaberry.com/uploads/ProjectStepsImages/1293/6/10.jpg" style="width: 50%;"><span style="background-color: transparent;"><font color="#767676" face="Lato, Helvetica, Arial, sans-serif"><span style="font-size: 16px;"><br></span></font></span></p></div><p></p>

<a href="https://vimeo.com/433854572" target="_blank" style="background-color: rgb(255, 255, 255); color: rgb(35, 82, 124); text-decoration: underline; outline: 0px; font-family: sans-serif; font-weight: 400;">This video from Abdallah walks you through the steps to configure your JSON script task</a>

